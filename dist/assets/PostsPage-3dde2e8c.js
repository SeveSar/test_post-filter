import{l as C,V}from"./lodash-341e9506.js";import{a as w}from"./index-7c73d981.js";import{e as h,u as D,f as t,g as b,h as d,o as v,c as x,i as I,j as B,_ as U}from"./index-c1a2f86c.js";const E={class:"posts-page"},R=h({__name:"PostsPage",setup(S){const _=D(),r=t(null),o=t({title:"",body:"",userId:"",id:""}),c=t({perPage:10,totalCount:100}),l=t(1),a=t(""),s=t("asc"),i=t([{key:"id",title:"ID"},{key:"title",title:"Title"},{key:"body",title:"Body"},{key:"userId",title:"User ID"}]),m=b(()=>i.value.map(e=>({key:e.key,placeholder:e.title}))),u=async()=>{try{const e={filters:o.value,sorts:{sortColumn:a.value,sortDirection:s.value},pagination:{limit:c.value.perPage,currentPage:l.value}},{total:n,data:k}=await w.posts.getPosts(e);r.value=k,c.value.totalCount=+n}catch(e){console.log(e)}},g=e=>{l.value=e,u()},f=e=>{a.value===e?s.value=s.value==="asc"?"desc":"asc":(a.value=e,s.value="asc")},P=({value:e,key:n})=>{l.value=1,o.value[n]=e},y=e=>{_.push({name:"Post",params:{id:e}})};u();const p=C.debounce(u,400);return d(o,p,{deep:!0}),d(()=>[a,s],p,{deep:!0}),(e,n)=>(v(),x("div",E,[r.value?(v(),I(V,{key:0,class:"posts-page__table",paginationView:c.value,currentPage:l.value,filtersView:m.value,filters:o.value,columns:i.value,items:r.value,sortColumn:a.value,sortDirection:s.value,"onUpdate:currentPage":g,"onUpdate:filterValue":P,onClickRow:y,onClickSortKey:f},null,8,["paginationView","currentPage","filtersView","filters","columns","items","sortColumn","sortDirection"])):B("",!0)]))}});const F=U(R,[["__scopeId","data-v-1edae240"]]);export{F as default};
